@page "/"
@using System.Text.Json;
@using Newtonsoft.Json;
@using System.Text.RegularExpressions;
@using QuizApp.Blazor.Services;

<Navbar/>

<div>
    @foreach(var button in buttons)
    {
        <button class="@button.Value" @onclick="() => GetQuestions(button.Key)">@button.Key</button>
    }
</div>
<button @onclick="GetAnswer">Submit</button>

@code {
    private Dictionary<int, string>? buttons;
    private int chosen = 0;

    private const string Btn = "quiz-button";
    private const string BtnChosen = "quiz-button-chosen";

    protected override void OnInitialized()
    {
        buttons = new Dictionary<int, string>
        {
            { 1, Btn },
            { 2, Btn },
            { 3, Btn }
        };
    }

    private void GetQuestions(int number)
    {
        foreach (var button in buttons!.Keys)
        {
            if(button == number)
            {
                buttons[button] = BtnChosen;
            }
            else
            {
                buttons[button] = Btn;
            }
        }

        chosen = buttons!
            .Where(b => b.Value == BtnChosen)
            .Select(k => k.Key)
            .FirstOrDefault();

        StateHasChanged();
    }

    private void GetAnswer()
    {
        Console.WriteLine(chosen);
    }
}